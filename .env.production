# HowlerOps Production Environment Configuration
# WARNING: Update all default passwords and secrets before deployment!

# =============================================================================
# APPLICATION CONFIGURATION
# =============================================================================
NODE_ENV=production
PORT=3000
APP_NAME=HowlerOps
APP_VERSION=1.0.0

# Frontend configuration
FRONTEND_PORT=8080
CORS_ORIGIN=https://yourdomain.com

# =============================================================================
# DATABASE CONFIGURATION
# =============================================================================

# Production PostgreSQL Database
POSTGRES_HOST=postgres
POSTGRES_PORT=5432
POSTGRES_DB=sqlstudio
POSTGRES_USER=sqlstudio
POSTGRES_PASSWORD=CHANGE_THIS_STRONG_PASSWORD

# Database connection pool settings
DB_POOL_MIN=5
DB_POOL_MAX=20
DB_POOL_IDLE_TIMEOUT=30000
DB_POOL_ACQUIRE_TIMEOUT=60000

# =============================================================================
# REDIS CONFIGURATION
# =============================================================================
REDIS_HOST=redis
REDIS_PORT=6379
REDIS_PASSWORD=CHANGE_THIS_REDIS_PASSWORD
REDIS_DB=0

# Redis session configuration
SESSION_SECRET=CHANGE_THIS_SESSION_SECRET_TO_RANDOM_STRING
SESSION_MAX_AGE=86400000
SESSION_SECURE=true

# =============================================================================
# SECURITY CONFIGURATION
# =============================================================================

# JWT Configuration
JWT_SECRET=CHANGE_THIS_JWT_SECRET_TO_VERY_SECURE_RANDOM_STRING
JWT_EXPIRES_IN=7d
JWT_REFRESH_EXPIRES_IN=30d

# Password hashing
BCRYPT_SALT_ROUNDS=12

# API Rate Limiting
RATE_LIMIT_WINDOW_MS=900000
RATE_LIMIT_MAX_REQUESTS=100
RATE_LIMIT_SKIP_SUCCESSFUL_REQUESTS=false

# =============================================================================
# LOGGING CONFIGURATION
# =============================================================================
LOG_LEVEL=warn
LOG_FORMAT=json
LOG_FILE_ENABLED=true
LOG_CONSOLE_ENABLED=false
LOG_MAX_FILES=10
LOG_MAX_SIZE=20971520

# =============================================================================
# MONITORING CONFIGURATION
# =============================================================================

# Prometheus metrics
PROMETHEUS_ENABLED=true
PROMETHEUS_PORT=9090
PROMETHEUS_METRICS_PATH=/metrics

# Health checks
HEALTH_CHECK_ENABLED=true
HEALTH_CHECK_PATH=/api/health

# Performance monitoring
APM_ENABLED=true
APM_SERVICE_NAME=sql-studio
APM_ENVIRONMENT=production

# Error tracking (Configure your Sentry DSN)
SENTRY_ENABLED=true
SENTRY_DSN=https://your-sentry-dsn@sentry.io/project-id
SENTRY_ENVIRONMENT=production
SENTRY_TRACES_SAMPLE_RATE=0.1

# =============================================================================
# PERFORMANCE CONFIGURATION
# =============================================================================

# PM2 clustering
PM2_INSTANCES=max
PM2_MAX_MEMORY_RESTART=512M

# Compression
COMPRESSION_ENABLED=true
COMPRESSION_LEVEL=6

# Static file serving
STATIC_MAX_AGE=31536000
STATIC_GZIP_ENABLED=true

# =============================================================================
# FEATURES CONFIGURATION
# =============================================================================

# File upload configuration
UPLOAD_MAX_SIZE=104857600
UPLOAD_ALLOWED_TYPES=sql,csv,json,txt
UPLOAD_DESTINATION=./uploads

# Query execution
QUERY_TIMEOUT=30000
QUERY_MAX_ROWS=10000
QUERY_CACHE_ENABLED=true
QUERY_CACHE_TTL=300

# WebSocket configuration
WS_ENABLED=true
WS_HEARTBEAT_INTERVAL=30000
WS_MAX_CONNECTIONS=1000

# =============================================================================
# EXTERNAL SERVICES
# =============================================================================

# Email configuration
EMAIL_ENABLED=true
EMAIL_SERVICE=smtp
EMAIL_HOST=smtp.yourdomain.com
EMAIL_PORT=587
EMAIL_SECURE=true
EMAIL_USER=notifications@yourdomain.com
EMAIL_PASSWORD=CHANGE_THIS_EMAIL_PASSWORD

# Cloud storage
CLOUD_STORAGE_ENABLED=true
CLOUD_STORAGE_PROVIDER=aws
CLOUD_STORAGE_BUCKET=sql-studio-uploads-prod
CLOUD_STORAGE_REGION=us-east-1

# =============================================================================
# GRAFANA CONFIGURATION
# =============================================================================
GRAFANA_PASSWORD=CHANGE_THIS_GRAFANA_PASSWORD
GRAFANA_ADMIN_USER=admin

# =============================================================================
# BACKUP CONFIGURATION
# =============================================================================
BACKUP_ENABLED=true
BACKUP_SCHEDULE=0 2 * * *
BACKUP_RETENTION_DAYS=30
BACKUP_S3_BUCKET=sql-studio-backups-prod
BACKUP_S3_REGION=us-east-1

# =============================================================================
# SSL/TLS CONFIGURATION
# =============================================================================
SSL_ENABLED=true
SSL_CERT_PATH=/etc/ssl/certs/sqlstudio.crt
SSL_KEY_PATH=/etc/ssl/private/sqlstudio.key

# =============================================================================
# SECURITY HARDENING
# =============================================================================
HELMET_ENABLED=true
CORS_ENABLED=true
RATE_LIMIT_ENABLED=true
COMPRESSION_ENABLED=true